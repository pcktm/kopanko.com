---
import type { Achievement, Project } from "@lib/cms/types";
import { Image } from "astro:assets";

export type Props = {
  content: Achievement[] | Project[];
};

const { content } = Astro.props;
---

<div class="columns-1 gap-4 sm:columns-2">
  {
    content.map((entry, index) => (
      <div class="mb-5 w-full break-inside-avoid-column border border-stone-200 bg-stone-50 dark:border-stone-700 dark:bg-stone-900/40 relative">
        {entry.coverImage && (
          <Image
            style={entry.coverImage?.placeholder?.css}
            src={{
              src: entry.coverImage.url,
              height: entry.coverImage.height,
              width: entry.coverImage.width,
              format: "webp",
            }}
            class="w-full object-cover"
            alt={entry.coverImage.caption ?? ""}
          />
        )}
        <div class="relative p-4">
          {entry.action && (
            <a
              class="absolute -top-3 right-3 bg-stone-200 text-stone-800 px-2 py-1 font-mono text-xs dark:bg-stone-800 dark:text-stone-200 border border-stone-300 dark:border-stone-600"
              href={entry.action.url}
              target="_blank"
              rel="noopener"
            >
              [{entry.action.text}]
            </a>
          )}
          <div class="font-mono text-xs text-stone-400 mb-2 dark:text-stone-500">
            [{String(index + 1).padStart(2, "0")}]
          </div>
          <h1 class="font-redaction20 text-xl font-bold text-balance">
            {entry.title}
          </h1>
          <h2 class="font-mono text-sm text-stone-600 dark:text-stone-300 mt-1">
            {entry.tagline}
          </h2>
          <div class="prose prose-sm prose-stone dark:prose-invert mt-3 font-sans">
            <Fragment set:html={entry.description?.html} />
          </div>
        </div>
      </div>
    ))
  }
</div>

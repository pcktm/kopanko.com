---
import type { Achievement, Project } from "@lib/cms/types";
import { Image } from "astro:assets";

export type Props = {
  content: Achievement[] | Project[];
};

const { content } = Astro.props;
---

<div class="columns-1 gap-4 sm:columns-2">
  {
    content.map((entry) => (
      <div class="mb-5 w-full break-inside-avoid-column ncurses-border bg-stone-50 dark:bg-zinc-900 relative">
        {entry.coverImage && (
          <Image
            style={entry.coverImage?.placeholder?.css}
            src={{
              src: entry.coverImage.url,
              height: entry.coverImage.height,
              width: entry.coverImage.width,
              format: "webp",
            }}
            class="w-full object-cover"
            alt={entry.coverImage.caption ?? ""}
          />
        )}
        <div class="relative p-4 font-mono">
          {entry.action && (
            <a
              class="absolute -top-3 right-3 bg-zinc-800 text-green-400 px-2 py-1 font-mono text-xs border border-zinc-600"
              href={entry.action.url}
              target="_blank"
              rel="noopener"
            >
              [{entry.action.text}]
            </a>
          )}
          <h1 class="font-redaction20 mt-1 text-xl font-bold text-balance">
            {entry.title}
          </h1>
          <h2 class="font-mono text-xs text-zinc-500 dark:text-zinc-400 mt-1">
            # {entry.tagline}
          </h2>
          <div class="prose prose-sm prose-stone dark:prose-invert mt-3 font-sans">
            <Fragment set:html={entry.description?.html} />
          </div>
        </div>
      </div>
    ))
  }
</div>

<style>
.ncurses-border {
  /* Subtle dithered effect - more functional, less showy */
  border: 1px dotted #a1a1aa;
  position: relative;
}

/* Dark mode version - very subtle */
.dark .ncurses-border {
  border-color: #52525b;
}
</style>
